<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="css/custom.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" href="css/weather-icons.min.css">
	<title>Weather Forecasting</title>
</head>
<body>

	<!-- Parent Div Begins -->
	<div class="parent" id="app" v-if="weather" v-on:click="getDayOfTheWeek()" v-on:click="getDates()">

		<!-- Weather UI HTML -->
		<div class="weather-widget" v-on:click="isDark = true" v-bind:class="{active: isActive, 'dark-theme': isDark}">
		  <div class="weather-icon row">
		    <i class="wi wi-day-sunny" id="icon1" v-on:click="doAnAlert()"></i>
		  </div>
		  <h1 class="temp-c row">{{weather.data.daily[0].temp.day.toFixed(0)}}</h1>
		  <h5 class="condition row">{{weather.data.daily[0].weather[0].description}}</h5>
		  <h3 class="location-name row">Istanbul</h3>
		  <h5 class="location-country row">Turkey</h5>
		</div>
		<div class="weather-forecast">

		  <div class="forecast-item">
		    <div class="day">
		      <h4>{{getDayOfTheWeek(0)}}</h4>
		      <h6>{{dates[0]}}</h6>
		    </div>
		    <div class="forecast">
		      <i class="wi wi-night-sleet"></i> {{weather.data.daily[1].temp.day.toFixed(0)}}
		      <h6>{{weather.data.daily[1].weather[0].description}}</h6>
		    </div>
		  </div>

		  <div class="forecast-item">
		    <div class="day">
		      <h4>{{getDayOfTheWeek(1)}}</h4>
		      <h6>{{dates[1]}}</h6>
		    </div>
		    <div class="forecast">
		      <i class="wi wi-night-sleet"></i> {{weather.data.daily[2].temp.day.toFixed(0)}}
		      <h6>{{weather.data.daily[2].weather[0].description}}</h6>
		    </div>
		  </div>

		  <div class="forecast-item">
		    <div class="day">
		      <h4>{{getDayOfTheWeek(2)}}</h4>
		      <h6>{{dates[2]}}</h6>
		    </div>
		    <div class="forecast">
		      <i class="wi wi-day-thunderstorm"></i> {{weather.data.daily[3].temp.day.toFixed(0)}}
		      <h6>{{weather.data.daily[3].weather[0].description}}</h6>
		    </div>
		  </div>

		  <div class="forecast-item">
		    <div class="day">
		      <h4>{{getDayOfTheWeek(3)}}</h4>
		      <h6>{{dates[3]}}</h6>
		    </div>
		    <div class="forecast">
				<img src="" alt="">
		      <i class="wi wi-day-sunny"></i> {{weather.data.daily[4].temp.day.toFixed(0)}}
		      <h6>{{weather.data.daily[4].weather[0].description}}</h6>
		    </div>
		  </div>

		  <div class="forecast-item">
		    <div class="day">
		      <h4>{{getDayOfTheWeek(4)}}</h4>
		      <h6>{{dates[4]}}</h6>
		    </div>
		    <div class="forecast">
		      <i class="wi wi-night-sleet"></i> {{weather.data.daily[5].temp.day.toFixed(0)}}
		      <h6>{{weather.data.daily[5].weather[0].description}}</h6>
		    </div>
		  </div>

		  <div class="forecast-item">
		    <div class="day">
		      <h4>{{getDayOfTheWeek(-2)}}</h4>
		      <h6>{{dates[5]}}</h6>
		    </div>
		    <div class="forecast">
		      <i class="wi wi-night-sleet"></i> {{weather.data.daily[6].temp.day.toFixed(0)}}
		      <h6>{{weather.data.daily[6].weather[0].description}}</h6>
		    </div>
		  </div>

		  <div class="forecast-item">
		    <div class="day">
		      <h4>{{getDayOfTheWeek(-1)}}</h4>
		      <h6>{{dates[6]}}</h6>
		    </div>
		    <div class="forecast">
		      <i class="wi wi-night-sleet"></i> {{weather.data.daily[7].temp.day.toFixed(0)}}
		      <h6>{{weather.data.daily[7].weather[0].description}}</h6>
		    </div>
		  </div>


		</div>
	<!-- WeatherUI HTML ENDS -->
  </div>
	<script src="https://cdn.jsdelivr.net/npm/vue"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>

	<script>
	(function(){

		var app = new Vue({
		  el: '#app',
		  data: {
			  weather: false,
			  date: ['Jul 27', 'Jul 28', 'Jul 29', 'Jul 30', 'Jul 31', 'Aug 1', 'Aug 2', 'Aug 3'],
			  daysOfTheWeek: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday', 'Monday'],
			  isActive: true,
			  isDark: false,
			  dates:''
		  },
		  created: function () {
		    // `this` points to the vm instance
		    console.log('working created')
			this.createDates();
		  },
		  methods: {
			  doAnAlert: function () {
				  // alert(' function')
			  },
			  getDayOfTheWeek: function (indexAddition) {
				  var date = new Date();
				  var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
				  var currentDay = date.getDay();
				  var finalRef = currentDay + indexAddition;
				  return days[finalRef]

			  },
			  createDates: function () {
				  var now = moment();
				  var datesCreated = [];
				  var daysRequired = 7
				  for (var i = 0; i <= daysRequired; i++) {
				    datesCreated.push( moment().add(i, 'days').format('dddd, Do MMMM YYYY') )
				  }
				  console.log(this);
				  this.dates = datesCreated;
			  },
			  getIcons: function () {
				  for (var i = 0; i < array.length; i++) {
			      array[i]

				}
			  }

		  }
		});


		makeAjaxRequest();

		 function makeAjaxRequest () {
		    // GET request for remote image in node.js
		    axios({
		      method: 'get',
		      url: 'https://api.openweathermap.org/data/2.5/onecall?lat=-28.974576&lon=-41.005356&units=metric&exclude=hourly,minute&appid=13c94423ae63a2bfabde86d786ea767d'
		    }).then(function (response) {
			  app.weather=response
			  getStarted()
		    });
		  } // makeAjaxRequest ENDS

		  function getStarted() {
		  	// console.log(app.weather);
		  }

			function weatherCheck (data) {
				console.log(data);
				// Has 8 checks
				if(data.daily[0].weather[0].description.includes('sun')) {
					alert('rain spotted');
					$('panelOne')
				}

			    if(data.daily[0].weather[0].description.includes('sun')) {
					alert('rain spotted');
				}

			}


	}()); // iffe function ENDS

	</script>
</body>
</html>
